!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){function e(t,e){var i,o,n,a,s=!1,r=t.x,l=t.y;for(i=0,o=e.length-1;i<e.length;o=i++)n=e[i][1]>l,a=e[o][1]>l,n!==a&&r<(e[o][0]-e[i][0])*(l-e[i][1])/(e[o][1]-e[i][1])+e[i][0]&&(s=!s);return s}function i(t,e,i,o,n,a,s,r){return["M",t+n,e,"L",t+i-a,e,"C",t+i-a/2,e,t+i,e+a/2,t+i,e+a,"L",t+i,e+o-s,"C",t+i,e+o-s/2,t+i-s/2,e+o,t+i-s,e+o,"L",t+r,e+o,"C",t+r/2,e+o,t,e+o-r/2,t,e+o-r,"L",t,e+n,"C",t,e+n/2,t+n/2,e,t+n,e,"Z"]}var o,n=t.Axis,a=t.Chart,s=t.Color,r=t.Point,l=t.Pointer,p=t.Legend,h=t.LegendSymbolMixin,d=t.Renderer,c=t.Series,m=t.SVGRenderer,u=t.VMLRenderer,g=t.win,f=g.document,x=t.addEvent,y=t.each,v=t.error,b=t.extend,C=t.extendClass,w=t.format,A=t.merge,M=t.pick,T=t.getOptions(),S=t.seriesTypes,k=T.plotOptions,L=t.wrap,P=function(){};L(n.prototype,"getSeriesExtremes",function(t){var e,i,o,n=this.isXAxis,a=[];n&&y(this.series,function(t,e){t.useMapGeometry&&(a[e]=t.xData,t.xData=[])}),t.call(this),n&&(e=M(this.dataMin,Number.MAX_VALUE),i=M(this.dataMax,-Number.MAX_VALUE),y(this.series,function(t,n){t.useMapGeometry&&(e=Math.min(e,M(t.minX,e)),i=Math.max(i,M(t.maxX,e)),t.xData=a[n],o=!0)}),o&&(this.dataMin=e,this.dataMax=i))}),L(n.prototype,"setAxisTranslation",function(t){var e,i,n,a,s,r,l=this.chart,p=l.plotWidth/l.plotHeight,h=l.xAxis[0];t.call(this),"yAxis"===this.coll&&h.transA!==o&&y(this.series,function(t){t.preserveAspectRatio&&(r=!0)}),r&&(this.transA=h.transA=Math.min(this.transA,h.transA),e=p/((h.max-h.min)/(this.max-this.min)),n=e<1?this:h,i=(n.max-n.min)*n.transA,n.pixelPadding=n.len-i,n.minPixelPadding=n.pixelPadding/2,a=n.fixTo,a&&(s=a[1]-n.toValue(a[0],!0),s*=n.transA,(Math.abs(s)>n.minPixelPadding||n.min===n.dataMin&&n.max===n.dataMax)&&(s=0),n.minPixelPadding-=s))}),L(n.prototype,"render",function(t){t.call(this),this.fixTo=null});var D=t.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};b(D.prototype,n.prototype),b(D.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(t,e){var i,o="vertical"!==t.options.legend.layout;i=A(this.defaultColorAxisOptions,{side:o?2:1,reversed:!o},e,{opposite:!o,showEmpty:!1,title:null,isColor:!0}),n.prototype.init.call(this,t,i),e.dataClasses&&this.initDataClasses(e),this.initStops(e),this.horiz=o,this.zoomEnabled=!1},tweenColors:function(t,e,i){var o,n;return e.rgba.length&&t.rgba.length?(t=t.rgba,e=e.rgba,o=1!==e[3]||1!==t[3],n=(o?"rgba(":"rgb(")+Math.round(e[0]+(t[0]-e[0])*(1-i))+","+Math.round(e[1]+(t[1]-e[1])*(1-i))+","+Math.round(e[2]+(t[2]-e[2])*(1-i))+(o?","+(e[3]+(t[3]-e[3])*(1-i)):"")+")"):n=e.input||"none",n},initDataClasses:function(t){var e,i=this,o=this.chart,n=0,a=this.options,r=t.dataClasses.length;this.dataClasses=e=[],this.legendItems=[],y(t.dataClasses,function(t,l){var p;t=A(t),e.push(t),t.color||("category"===a.dataClassColor?(p=o.options.colors,t.color=p[n++],n===p.length&&(n=0)):t.color=i.tweenColors(s(a.minColor),s(a.maxColor),r<2?.5:l/(r-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],y(this.stops,function(t){t.color=s(t[1])})},setOptions:function(t){n.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var t,e,i,o,n=this.legendSymbol,a=this.chart;n&&(this.left=t=n.attr("x"),this.top=e=n.attr("y"),this.width=i=n.attr("width"),this.height=o=n.attr("height"),this.right=a.chartWidth-t-i,this.bottom=a.chartHeight-e-o,this.len=this.horiz?i:o,this.pos=this.horiz?t:e)},toColor:function(t,e){var i,n,a,s,r,l,p=this.stops,h=this.dataClasses;if(h){for(l=h.length;l--;)if(r=h[l],n=r.from,a=r.to,(n===o||t>=n)&&(a===o||t<=a)){s=r.color,e&&(e.dataClass=l);break}}else{for(this.isLog&&(t=this.val2lin(t)),i=1-(this.max-t)/(this.max-this.min||1),l=p.length;l--&&!(i>p[l][0]););n=p[l]||p[l+1],a=p[l+1]||n,i=1-(a[0]-i)/(a[0]-n[0]||1),s=this.tweenColors(n.color,a.color,i)}return s},getOffset:function(){var t=this.legendGroup,e=this.chart.axisOffset[this.side];t&&(this.axisParent=t,n.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=e)},setLegendColor:function(){var t,e=this.horiz,i=this.options,o=this.reversed,n=o?1:0,a=o?0:1;t=e?[n,0,a,0]:[0,a,0,n],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:i.stops||[[0,i.minColor],[1,i.maxColor]]}},drawLegendSymbol:function(t,e){var i=t.padding,o=t.options,n=this.horiz,a=M(o.symbolWidth,n?200:12),s=M(o.symbolHeight,n?12:200),r=M(o.labelPadding,n?16:30),l=M(o.itemDistance,10);this.setLegendColor(),e.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,a,s).attr({zIndex:1}).add(e.legendGroup),this.legendItemWidth=a+i+(n?l:r),this.legendItemHeight=s+i+(n?r:0)},setState:P,visible:!0,setVisible:P,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,e){var i,o=e&&e.plotX,a=e&&e.plotY,s=this.pos,r=this.len;e&&(i=this.toPixels(e[e.series.colorKey]),i<s?i=s-2:i>s+r&&(i=s+r+2),e.plotX=i,e.plotY=this.len-i,n.prototype.drawCrosshair.call(this,t,e),e.plotX=o,e.plotY=a,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(t,e,i,o,a){return"number"==typeof a?this.horiz?["M",a-4,this.top-6,"L",a+4,this.top-6,a,this.top,"Z"]:["M",this.left,a,"L",this.left-6,a+6,this.left-6,a-6,"Z"]:n.prototype.getPlotLinePath.call(this,t,e,i,o)},update:function(t,e){var i=this.chart,o=i.legend;y(this.series,function(t){t.isDirtyData=!0}),t.dataClasses&&o.allItems&&(y(o.allItems,function(t){t.isDataClass&&t.legendGroup.destroy()}),i.isDirtyLegend=!0),i.options[this.coll]=A(this.userOptions,t),n.prototype.update.call(this,t,e),this.legendItem&&(this.setLegendColor(),o.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var e,i=this,n=this.chart,a=this.legendItems,s=n.options.legend,r=s.valueDecimals,l=s.valueSuffix||"";return a.length||y(this.dataClasses,function(s,p){var d=!0,c=s.from,m=s.to;e="",c===o?e="< ":m===o&&(e="> "),c!==o&&(e+=t.numberFormat(c,r)+l),c!==o&&m!==o&&(e+=" - "),m!==o&&(e+=t.numberFormat(m,r)+l),a.push(b({chart:n,name:e,options:{},drawLegendSymbol:h.drawRectangle,visible:!0,setState:P,isDataClass:!0,setVisible:function(){d=this.visible=!d,y(i.series,function(t){y(t.points,function(t){t.dataClass===p&&t.setVisible(d)})}),n.legend.colorizeItem(this,d)}},s))}),a},name:""}),y(["fill","stroke"],function(e){t.Fx.prototype[e+"Setter"]=function(){this.elem.attr(e,D.prototype.tweenColors(s(this.start),s(this.end),this.pos))}}),L(a.prototype,"getAxes",function(t){var e=this.options,i=e.colorAxis;t.call(this),this.colorAxis=[],i&&new D(this,i)}),L(p.prototype,"getAllItems",function(t){var e=[],i=this.chart.colorAxis[0];return i&&(i.options.dataClasses?e=e.concat(i.getDataClassLegendSymbols()):e.push(i),y(i.series,function(t){t.options.showInLegend=!1})),e.concat(t.call(this))});var O={setVisible:function(t){var e=this,i=t?"show":"hide";y(["graphic","dataLabel"],function(t){e[t]&&e[t][i]()})}},F={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:P,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,e=this.options.nullColor,i=this.colorAxis,o=this.colorKey;y(this.data,function(n){var a,s=n[o];a=n.options.color||(null===s?e:i&&void 0!==s?i.toColor(s,n):n.color||t.color),a&&(n.color=a)})}};b(a.prototype,{renderMapNavigation:function(){var t,e,i,o,n,a=this,s=this.options.mapNavigation,r=s.buttons,l=function(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},p=function(t){this.handler.call(a,t),l(t)};if(M(s.enableButtons,s.enabled)&&!a.renderer.forExport)for(t in r)r.hasOwnProperty(t)&&(i=A(s.buttonOptions,r[t]),o=i.theme,o.style=A(i.theme.style,i.style),n=o.states,e=a.renderer.button(i.text,0,0,p,o,n&&n.hover,n&&n.select,0,"zoomIn"===t?"topbutton":"bottombutton").attr({width:i.width,height:i.height,title:a.options.lang[t],zIndex:5}).add(),e.handler=i.onclick,e.align(b(i,{width:e.width,height:2*e.height}),null,i.alignTo),x(e.element,"dblclick",l))},fitToBox:function(t,e){return y([["x","width"],["y","height"]],function(i){var o=i[0],n=i[1];t[o]+t[n]>e[o]+e[n]&&(t[n]>e[n]?(t[n]=e[n],t[o]=e[o]):t[o]=e[o]+e[n]-t[n]),t[n]>e[n]&&(t[n]=e[n]),t[o]<e[o]&&(t[o]=e[o])}),t},mapZoom:function(t,e,i,o,n){var a=this,s=a.xAxis[0],r=s.max-s.min,l=M(e,s.min+r/2),p=r*t,h=a.yAxis[0],d=h.max-h.min,c=M(i,h.min+d/2),m=d*t,u=o?(o-s.pos)/s.len:.5,g=n?(n-h.pos)/h.len:.5,f=l-p*u,x=c-m*g,y=a.fitToBox({x:f,y:x,width:p,height:m},{x:s.dataMin,y:h.dataMin,width:s.dataMax-s.dataMin,height:h.dataMax-h.dataMin});o&&(s.fixTo=[o-s.pos,e]),n&&(h.fixTo=[n-h.pos,i]),void 0!==t?(s.setExtremes(y.x,y.x+y.width,!1),h.setExtremes(y.y,y.y+y.height,!1)):(s.setExtremes(void 0,void 0,!1),h.setExtremes(void 0,void 0,!1)),a.redraw()}}),L(a.prototype,"render",function(t){var e=this,i=e.options.mapNavigation;e.renderMapNavigation(),t.call(e),(M(i.enableDoubleClickZoom,i.enabled)||i.enableDoubleClickZoomTo)&&x(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}),M(i.enableMouseWheelZoom,i.enabled)&&x(e.container,void 0===f.onmousewheel?"DOMMouseScroll":"mousewheel",function(t){return e.pointer.onContainerMouseWheel(t),!1})}),b(l.prototype,{onContainerDblClick:function(t){var e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)},onContainerMouseWheel:function(t){var e,i=this.chart;t=this.normalize(t),e=t.detail||-(t.wheelDelta/120),i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&i.mapZoom(Math.pow(2,e),i.xAxis[0].toValue(t.chartX),i.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)}}),L(l.prototype,"init",function(t,e,i){t.call(this,e,i),M(i.mapNavigation.enableTouchZoom,i.mapNavigation.enabled)&&(this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=this.hasZoom=!0)}),L(l.prototype,"pinchTranslate",function(t,e,i,o,n,a,s){var r;t.call(this,e,i,o,n,a,s),"map"===this.chart.options.chart.type&&this.hasZoom&&(r=o.scaleX>o.scaleY,this.pinchTranslateDirection(!r,e,i,o,n,a,s,r?o.scaleX:o.scaleY))});var E=void 0!==f.documentElement.style.vectorEffect;k.map=A(k.scatter,{allAreas:!0,animation:!1,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},turboThreshold:0,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{brightness:.2,halo:null}}});var X=C(r,b({applyOptions:function(t,e){var i,o=r.prototype.applyOptions.call(this,t,e),n=this.series,a=n.joinBy;return n.mapData&&(i=void 0!==o[a[1]]&&n.mapMap[o[a[1]]],i?(n.xyFromShape&&(o.x=i._midX,o.y=i._midY),b(o,i)):o.value=o.value||null),o},onMouseOver:function(t){clearTimeout(this.colorInterval),null!==this.value?r.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},onMouseOut:function(){var t,e=this,i=+new Date,o=s(e.color),n=s(e.pointAttr.hover.fill),a=e.series.options.states.normal.animation,l=a&&(a.duration||500);l&&4===o.rgba.length&&4===n.rgba.length&&"select"!==e.state&&(t=e.pointAttr[""].fill,delete e.pointAttr[""].fill,clearTimeout(e.colorInterval),e.colorInterval=setInterval(function(){var t=(new Date-i)/l,a=e.graphic;t>1&&(t=1),a&&a.attr("fill",D.prototype.tweenColors.call(0,n,o,t)),t>=1&&clearTimeout(e.colorInterval)},13)),r.prototype.onMouseOut.call(e),t&&(e.pointAttr[""].fill=t)},zoomTo:function(){var t=this,e=t.series;e.xAxis.setExtremes(t._minX,t._maxX,!1),e.yAxis.setExtremes(t._minY,t._maxY,!1),e.chart.redraw()}},O));S.map=C(S.scatter,A(F,{type:"map",pointClass:X,supportsDrilldown:!0,getExtremesFromAll:!0,useMapGeometry:!0,forceDL:!0,searchPoint:P,directTouch:!0,preserveAspectRatio:!0,getBox:function(e){var i,o=Number.MAX_VALUE,n=-o,a=o,s=-o,r=o,l=o,p=this.xAxis,h=this.yAxis;y(e||[],function(e){if(e.path){"string"==typeof e.path&&(e.path=t.splitPath(e.path));var p=e.path||[],h=p.length,d=!1,c=-o,m=o,u=-o,g=o,f=e.properties;if(!e._foundBox){for(;h--;)"number"!=typeof p[h]||isNaN(p[h])||(d?(c=Math.max(c,p[h]),m=Math.min(m,p[h])):(u=Math.max(u,p[h]),g=Math.min(g,p[h])),d=!d);e._midX=m+(c-m)*(e.middleX||f&&f["hc-middle-x"]||.5),e._midY=g+(u-g)*(e.middleY||f&&f["hc-middle-y"]||.5),e._maxX=c,e._minX=m,e._maxY=u,e._minY=g,e.labelrank=M(e.labelrank,(c-m)*(u-g)),e._foundBox=!0}n=Math.max(n,e._maxX),a=Math.min(a,e._minX),s=Math.max(s,e._maxY),r=Math.min(r,e._minY),l=Math.min(e._maxX-e._minX,e._maxY-e._minY,l),i=!0}}),i&&(this.minY=Math.min(r,M(this.minY,o)),this.maxY=Math.max(s,M(this.maxY,-o)),this.minX=Math.min(a,M(this.minX,o)),this.maxX=Math.max(n,M(this.maxX,-o)),p&&void 0===p.options.minRange&&(p.minRange=Math.min(5*l,(this.maxX-this.minX)/5,p.minRange||o)),h&&void 0===h.options.minRange&&(h.minRange=Math.min(5*l,(this.maxY-this.minY)/5,h.minRange||o)))},getExtremes:function(){c.prototype.getExtremes.call(this,this.valueData),this.chart.hasRendered&&this.isDirtyData&&this.getBox(this.options.data),this.valueMin=this.dataMin,this.valueMax=this.dataMax,this.dataMin=this.minY,this.dataMax=this.maxY},translatePath:function(t){var e,i=this,o=!1,n=i.xAxis,a=i.yAxis,s=n.min,r=n.transA,l=n.minPixelPadding,p=a.min,h=a.transA,d=a.minPixelPadding,c=[];if(t)for(e=t.length;e--;)"number"==typeof t[e]?(c[e]=o?(t[e]-s)*r+l:(t[e]-p)*h+d,o=!o):c[e]=t[e];return c},setData:function(e,i){var o,n,a,s,r,l=this.options,p=l.mapData,h=l.joinBy,d=null===h,m=[];if(d&&(h="_i"),h=this.joinBy=t.splat(h),h[1]||(h[1]=h[0]),e&&y(e,function(t,i){"number"==typeof t&&(e[i]={value:t}),d&&(e[i]._i=i)}),this.getBox(e),p){if("FeatureCollection"===p.type){if(p["hc-transform"]){this.chart.mapTransforms=a=p["hc-transform"];for(n in a)a.hasOwnProperty(n)&&n.rotation&&(n.cosAngle=Math.cos(n.rotation),n.sinAngle=Math.sin(n.rotation))}p=t.geojson(p,this.type,this)}for(this.getBox(p),this.mapData=p,this.mapMap={},r=0;r<p.length;r++)o=p[r],s=o.properties,o._i=r,h[0]&&s&&s[h[0]]&&(o[h[0]]=s[h[0]]),this.mapMap[o[h[0]]]=o;l.allAreas&&(e=e||[],h[1]&&y(e,function(t){m.push(t[h[1]])}),m="|"+m.join("|")+"|",y(p,function(t){h[0]&&m.indexOf("|"+t[h[0]]+"|")!==-1||e.push(A(t,{value:null}))}))}c.prototype.setData.call(this,e,i)},drawGraph:P,drawDataLabels:P,doFullTranslate:function(){return this.isDirtyData||this.chart.isResizing||this.chart.renderer.isVML||!this.baseTrans},translate:function(){var t=this,e=t.xAxis,i=t.yAxis,o=t.doFullTranslate();t.generatePoints(),y(t.data,function(n){n.plotX=e.toPixels(n._midX,!0),n.plotY=i.toPixels(n._midY,!0),o&&(n.shapeType="path",n.shapeArgs={d:t.translatePath(n.path)},E&&(n.shapeArgs["vector-effect"]="non-scaling-stroke"))}),t.translateColors()},drawPoints:function(){var t,e,i,o,n=this,a=n.xAxis,s=n.yAxis,r=n.group,l=n.chart,p=l.renderer,h=this.baseTrans;n.transformGroup||(n.transformGroup=p.g().attr({scaleX:1,scaleY:1}).add(r),n.transformGroup.survive=!0),n.doFullTranslate()?(l.hasRendered&&"color"===n.pointAttrToOptions.fill&&y(n.points,function(t){t.shapeArgs&&(t.shapeArgs.fill=t.pointAttr[M(t.state,"")].fill)}),E||y(n.points,function(t){var e=t.pointAttr[""];e["stroke-width"]===n.pointAttr[""]["stroke-width"]&&(e["stroke-width"]="inherit")}),n.group=n.transformGroup,S.column.prototype.drawPoints.apply(n),n.group=r,y(n.points,function(t){t.graphic&&(t.name&&t.graphic.addClass("highcharts-name-"+t.name.replace(" ","-").toLowerCase()),t.properties&&t.properties["hc-key"]&&t.graphic.addClass("highcharts-key-"+t.properties["hc-key"].toLowerCase()),E||(t.graphic["stroke-widthSetter"]=P))}),this.baseTrans={originX:a.min-a.minPixelPadding/a.transA,originY:s.min-s.minPixelPadding/s.transA+(s.reversed?0:s.len/s.transA),transAX:a.transA,transAY:s.transA},this.transformGroup.animate({translateX:0,translateY:0,scaleX:1,scaleY:1})):(t=a.transA/h.transAX,e=s.transA/h.transAY,i=a.toPixels(h.originX,!0),o=s.toPixels(h.originY,!0),t>.99&&t<1.01&&e>.99&&e<1.01&&(t=1,e=1,i=Math.round(i),o=Math.round(o)),this.transformGroup.animate({translateX:i,translateY:o,scaleX:t,scaleY:e})),E||n.group.element.setAttribute("stroke-width",n.options.borderWidth/(t||1)),this.drawMapDataLabels()},drawMapDataLabels:function(){c.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},render:function(){var t=this,e=c.prototype.render;t.chart.renderer.isVML&&t.data.length>3e3?setTimeout(function(){e.call(t)}):e.call(t)},animate:function(t){var e=this.chart,i=this.options.animation,o=this.group,n=this.xAxis,a=this.yAxis,s=n.pos,r=a.pos;e.renderer.isSVG&&(i===!0&&(i={duration:1e3}),t?o.attr({translateX:s+n.len/2,translateY:r+a.len/2,scaleX:.001,scaleY:.001}):(o.animate({translateX:s,translateY:r,scaleX:1,scaleY:1},i),this.animate=null))},animateDrilldown:function(t){var e,i=this.chart.plotBox,o=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],n=o.bBox,a=this.chart.options.drilldown.animation;t||(e=Math.min(n.width/i.width,n.height/i.height),o.shapeArgs={scaleX:e,scaleY:e,translateX:n.x,translateY:n.y},y(this.points,function(t){t.graphic&&t.graphic.attr(o.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},a)}),this.animate=null)},drawLegendSymbol:h.drawRectangle,animateDrillupFrom:function(t){S.column.prototype.animateDrillupFrom.call(this,t)},animateDrillupTo:function(t){S.column.prototype.animateDrillupTo.call(this,t)}})),k.mapline=A(k.map,{lineWidth:1,fillColor:"none"}),S.mapline=C(S.map,{type:"mapline",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth",fill:"fillColor",dashstyle:"dashStyle"},drawLegendSymbol:S.line.prototype.drawLegendSymbol}),k.mappoint=A(k.scatter,{dataLabels:{enabled:!0,formatter:function(){return this.point.name},crop:!1,defer:!1,overflow:!1,style:{color:"#000000"}}}),S.mappoint=C(S.scatter,{type:"mappoint",forceDL:!0,pointClass:C(r,{applyOptions:function(t,e){var i=r.prototype.applyOptions.call(this,t,e);return void 0!==t.lat&&void 0!==t.lon&&(i=b(i,this.series.chart.fromLatLonToPoint(i))),i}})}),S.bubble&&(k.mapbubble=A(k.bubble,{animationLimit:500,tooltip:{pointFormat:"{point.name}: {point.z}"}}),S.mapbubble=C(S.bubble,{pointClass:C(r,{applyOptions:function(t,e){var i;return t&&void 0!==t.lat&&void 0!==t.lon?(i=r.prototype.applyOptions.call(this,t,e),i=b(i,this.series.chart.fromLatLonToPoint(i))):i=X.prototype.applyOptions.call(this,t,e),i},ttBelow:!1}),xyFromShape:!0,type:"mapbubble",pointArrayMap:["z"],getMapData:S.map.prototype.getMapData,getBox:S.map.prototype.getBox,setData:S.map.prototype.setData})),T.plotOptions.heatmap=A(T.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),S.heatmap=C(S.scatter,A(F,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,pointClass:C(r,O),supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;S.scatter.prototype.init.apply(this,arguments),t=this.options,t.pointRange=M(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this,e=t.options,i=t.xAxis,o=t.yAxis,n=function(t,e,i){return Math.min(Math.max(e,t),i)};t.generatePoints(),y(t.points,function(t){var a=(e.colsize||1)/2,s=(e.rowsize||1)/2,r=n(Math.round(i.len-i.translate(t.x-a,0,1,0,1)),0,i.len),l=n(Math.round(i.len-i.translate(t.x+a,0,1,0,1)),0,i.len),p=n(Math.round(o.translate(t.y-s,0,1,0,1)),0,o.len),h=n(Math.round(o.translate(t.y+s,0,1,0,1)),0,o.len);t.plotX=t.clientX=(r+l)/2,t.plotY=(p+h)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(r,l),y:Math.min(p,h),width:Math.abs(l-r),height:Math.abs(h-p)}}),t.translateColors(),this.chart.hasRendered&&y(t.points,function(t){t.shapeArgs.fill=t.options.color||t.color})},drawPoints:S.column.prototype.drawPoints,animate:P,getBox:P,drawLegendSymbol:h.drawRectangle,getExtremes:function(){c.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,c.prototype.getExtremes.call(this)}})),a.prototype.transformFromLatLon=function(t,e){if(void 0===g.proj4)return v(21),{x:0,y:null};var i=g.proj4(e.crs,[t.lon,t.lat]),o=e.cosAngle||e.rotation&&Math.cos(e.rotation),n=e.sinAngle||e.rotation&&Math.sin(e.rotation),a=e.rotation?[i[0]*o+i[1]*n,-i[0]*n+i[1]*o]:i;return{x:((a[0]-(e.xoffset||0))*(e.scale||1)+(e.xpan||0))*(e.jsonres||1)+(e.jsonmarginX||0),y:(((e.yoffset||0)-a[1])*(e.scale||1)+(e.ypan||0))*(e.jsonres||1)-(e.jsonmarginY||0)}},a.prototype.transformToLatLon=function(t,e){if(void 0===g.proj4)return void v(21);var i={x:((t.x-(e.jsonmarginX||0))/(e.jsonres||1)-(e.xpan||0))/(e.scale||1)+(e.xoffset||0),y:((-t.y-(e.jsonmarginY||0))/(e.jsonres||1)+(e.ypan||0))/(e.scale||1)+(e.yoffset||0)},o=e.cosAngle||e.rotation&&Math.cos(e.rotation),n=e.sinAngle||e.rotation&&Math.sin(e.rotation),a=g.proj4(e.crs,"WGS84",e.rotation?{x:i.x*o+i.y*-n,y:i.x*n+i.y*o}:i);return{lat:a.y,lon:a.x}},a.prototype.fromPointToLatLon=function(t){var i,o=this.mapTransforms;if(!o)return void v(22);for(i in o)if(o.hasOwnProperty(i)&&o[i].hitZone&&e({x:t.x,y:-t.y},o[i].hitZone.coordinates[0]))return this.transformToLatLon(t,o[i]);return this.transformToLatLon(t,o["default"])},a.prototype.fromLatLonToPoint=function(t){var i,o,n=this.mapTransforms;if(!n)return v(22),{x:0,y:null};for(i in n)if(n.hasOwnProperty(i)&&n[i].hitZone&&(o=this.transformFromLatLon(t,n[i]),e({x:o.x,y:-o.y},n[i].hitZone.coordinates[0])))return o;return this.transformFromLatLon(t,n["default"])},t.geojson=function(t,e,i){var o=[],n=[],a=function(t){var e,i=t.length;for(n.push("M"),e=0;e<i;e++)1===e&&n.push("L"),n.push(t[e][0],-t[e][1])};return e=e||"map",y(t.features,function(t){var i,s=t.geometry,r=s.type,l=s.coordinates,p=t.properties;n=[],"map"===e||"mapbubble"===e?("Polygon"===r?(y(l,a),n.push("Z")):"MultiPolygon"===r&&(y(l,function(t){y(t,a)}),n.push("Z")),n.length&&(i={path:n})):"mapline"===e?("LineString"===r?a(l):"MultiLineString"===r&&y(l,a),n.length&&(i={path:n})):"mappoint"===e&&"Point"===r&&(i={x:l[0],y:-l[1]}),i&&o.push(b(i,{name:p.name||p.NAME,properties:p}))}),i&&t.copyrightShort&&(i.chart.mapCredits=w(i.chart.options.credits.mapText,{geojson:t}),i.chart.mapCreditsFull=w(i.chart.options.credits.mapTextFull,{geojson:t})),o},L(a.prototype,"showCredits",function(e,i){this.mapCredits&&(i.href=null),e.call(this,t.merge(i,{text:i.text+(this.mapCredits||"")})),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}),b(T.lang,{zoomIn:"Zoom in",zoomOut:"Zoom out"}),T.mapNavigation={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"},theme:{"stroke-width":1}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}}},t.splitPath=function(t){var e;for(t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/),e=0;e<t.length;e++)/[a-zA-Z]/.test(t[e])||(t[e]=parseFloat(t[e]));return t},t.maps={},m.prototype.symbols.topbutton=function(t,e,o,n,a){return i(t-1,e-1,o,n,a.r,a.r,0,0)},m.prototype.symbols.bottombutton=function(t,e,o,n,a){return i(t-1,e-1,o,n,0,0,a.r,a.r)},d===u&&y(["topbutton","bottombutton"],function(t){u.prototype.symbols[t]=m.prototype.symbols[t]}),t.Map=t.mapChart=function(e,i,o){var n,s="string"==typeof e||e.nodeName,r=arguments[s?1:0],l={endOnTick:!1,gridLineWidth:0,lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]},p=t.getOptions().credits;return n=r.series,r.series=null,r=A({chart:{panning:"xy",type:"map"},credits:{mapText:M(p.mapText,' © <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:M(p.mapTextFull,"{geojson.copyright}")},xAxis:l,yAxis:A(l,{reversed:!0})},r,{chart:{inverted:!1,alignTicks:!1}}),r.series=n,s?new a(e,r,o):new a(r,i)}}),function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,i,o=t.win,n=o.document,a=t.Chart,s=t.addEvent,r=t.removeEvent,l=t.fireEvent,p=t.createElement,h=t.discardElement,d=t.css,c=t.merge,m=t.each,u=t.extend,g=t.splat,f=Math,x=f.max,y=t.isTouchDevice,v="M",b="L",C="div",w="hidden",A="none",M="highcharts-",T="absolute",S="px",k=t.Renderer.prototype.symbols,L=t.getOptions();u(L.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),L.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:A,color:"#303030",fontSize:y?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},L.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:M+"contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},t.post=function(t,e,i){var o,a;a=p("form",c({method:"post",action:t,enctype:"multipart/form-data"},i),{display:A},n.body);for(o in e)p("input",{type:w,name:o,value:e[o]},null,a);a.submit(),h(a)},u(a.prototype,{sanitizeSVG:function(t){return t.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(i){var o,a,s,r,l,d,f,x,y,v=this,b=c(v.options,i),w=b.exporting.allowHTML;return n.createElementNS||(n.createElementNS=function(t,e){return n.createElement(e)}),a=p(C,null,{position:T,top:"-9999em",width:v.chartWidth+S,height:v.chartHeight+S},n.body),f=v.renderTo.style.width,x=v.renderTo.style.height,l=b.exporting.sourceWidth||b.chart.width||/px$/.test(f)&&parseInt(f,10)||600,d=b.exporting.sourceHeight||b.chart.height||/px$/.test(x)&&parseInt(x,10)||400,u(b.chart,{animation:!1,renderTo:a,forExport:!0,renderer:"SVGRenderer",width:l,height:d}),b.exporting.enabled=!1,delete b.data,b.series=[],m(v.series,function(t){r=c(t.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:t.visible}),r.isInternal||b.series.push(r)}),i&&m(["xAxis","yAxis"],function(t){m(g(i[t]),function(e,i){b[t][i]=c(b[t][i],e)})}),o=new t.Chart(b,v.callback),m(["xAxis","yAxis"],function(t){m(v[t],function(i,n){var a=o[t][n],s=i.getExtremes(),r=s.userMin,l=s.userMax;!a||r===e&&l===e||a.setExtremes(r,l,!0,!1)})}),s=o.getChartHTML(),b=null,o.destroy(),h(a),w&&(y=s.match(/<\/svg>(.*?$)/),y&&(y='<foreignObject x="0" y="0" width="200" height="200"><body xmlns="http://www.w3.org/1999/xhtml">'+y[1]+"</body></foreignObject>",s=s.replace("</svg>",y+"</svg>"))),s=this.sanitizeSVG(s),s=s.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},getSVGForExport:function(t,e){var i=this.options.exporting;return this.getSVG(c({chart:{borderRadius:0}},i.chartOptions,e,{exporting:{sourceWidth:t&&t.sourceWidth||i.sourceWidth,sourceHeight:t&&t.sourceHeight||i.sourceHeight}}))},exportChart:function(e,i){var o=this.getSVGForExport(e,i);e=c(this.options.exporting,e),t.post(e.url,{filename:e.filename||"chart",type:e.type,width:e.width||0,scale:e.scale||2,svg:o},e.formAttributes)},print:function(){var t=this,e=t.container,i=[],a=e.parentNode,s=n.body,r=s.childNodes;t.isPrinting||(t.isPrinting=!0,t.pointer.reset(null,0),l(t,"beforePrint"),m(r,function(t,e){1===t.nodeType&&(i[e]=t.style.display,t.style.display=A)}),s.appendChild(e),o.focus(),o.print(),setTimeout(function(){a.appendChild(e),m(r,function(t,e){1===t.nodeType&&(t.style.display=i[e])}),t.isPrinting=!1,l(t,"afterPrint")},1e3))},contextMenu:function(t,e,i,o,a,l,h){var c,g,f,y,v=this,b=v.options.navigation,w=b.menuItemStyle,M=v.chartWidth,k=v.chartHeight,L="cache-"+t,P=v[L],D=x(a,l),O="3px 3px 10px #888",F=function(e){v.pointer.inClass(e.target,t)||g()};P||(v[L]=P=p(C,{className:t},{position:T,zIndex:1e3,padding:D+S},v.container),c=p(C,null,u({MozBoxShadow:O,WebkitBoxShadow:O,boxShadow:O},b.menuStyle),P),g=function(){d(P,{display:A}),h&&h.setState(0),v.openMenu=!1},s(P,"mouseleave",function(){f=setTimeout(g,500)}),s(P,"mouseenter",function(){clearTimeout(f)}),s(n,"mouseup",F),s(v,"destroy",function(){r(n,"mouseup",F)}),m(e,function(t){if(t){var e=t.separator?p("hr",null,null,c):p(C,{onmouseover:function(){d(this,b.menuItemHoverStyle)},onmouseout:function(){d(this,w)},onclick:function(e){e&&e.stopPropagation(),g(),t.onclick&&t.onclick.apply(v,arguments)},innerHTML:t.text||v.options.lang[t.textKey]},u({cursor:"pointer"},w),c);v.exportDivElements.push(e)}}),v.exportDivElements.push(c,P),v.exportMenuWidth=P.offsetWidth,v.exportMenuHeight=P.offsetHeight),y={display:"block"},i+v.exportMenuWidth>M?y.right=M-i-a-D+S:y.left=i-D+S,o+l+v.exportMenuHeight>k&&"top"!==h.alignOptions.verticalAlign?y.bottom=k-o-D+S:y.top=o+l-D+S,d(P,y),v.openMenu=!0},addButton:function(e){var o,n,a=this,s=a.renderer,r=c(a.options.navigation.buttonOptions,e),l=r.onclick,p=r.menuItems,h={stroke:r.symbolStroke,fill:r.symbolFill},d=r.symbolSize||12;if(a.btnCount||(a.btnCount=0),a.exportDivElements||(a.exportDivElements=[],a.exportSVGElements=[]),r.enabled!==!1){var m,g=r.theme,f=g.states,x=f&&f.hover,y=f&&f.select;delete g.states,l?m=function(t){t.stopPropagation(),l.call(a,t)}:p&&(m=function(){a.contextMenu(n.menuClassName,p,n.translateX,n.translateY,n.width,n.height,n),n.setState(2)}),r.text&&r.symbol?g.paddingLeft=t.pick(g.paddingLeft,25):r.text||u(g,{width:r.width,height:r.height,padding:0}),n=s.button(r.text,0,0,m,g,x,y).attr({title:a.options.lang[r._titleKey],"stroke-linecap":"round",zIndex:3}),n.menuClassName=e.menuClassName||M+"menu-"+a.btnCount++,r.symbol&&(o=s.symbol(r.symbol,r.symbolX-d/2,r.symbolY-d/2,d,d).attr(u(h,{"stroke-width":r.symbolStrokeWidth||1,zIndex:1})).add(n)),n.add().align(u(r,{width:n.width,x:t.pick(r.x,i)}),!0,"spacingBox"),
i+=(n.width+r.buttonSpacing)*("right"===r.align?-1:1),a.exportSVGElements.push(n,o)}},destroyExport:function(t){var e,i,o=t.target;for(e=0;e<o.exportSVGElements.length;e++)i=o.exportSVGElements[e],i&&(i.onclick=i.ontouchstart=null,o.exportSVGElements[e]=i.destroy());for(e=0;e<o.exportDivElements.length;e++)i=o.exportDivElements[e],r(i,"mouseleave"),o.exportDivElements[e]=i.onmouseout=i.onmouseover=i.ontouchstart=i.onclick=null,h(i)}}),k.menu=function(t,e,i,o){var n=[v,t,e+2.5,b,t+i,e+2.5,v,t,e+o/2+.5,b,t+i,e+o/2+.5,v,t,e+o-1.5,b,t+i,e+o-1.5];return n},a.prototype.callbacks.push(function(t){var e,o=t.options.exporting,n=o.buttons;if(i=0,o.enabled!==!1){for(e in n)t.addButton(n[e]);s(t,"destroy",t.destroyExport)}})}),$.fn.makeHmap=function(){var t={chart:{marginBottom:80,height:550,spacingBottom:90},title:{useHTML:!0,margin:15,text:"",style:{color:"#000000",fontFamily:'"RO Sans", Verdana, sans-serif',fontWeight:"bold",fontSize:"1.1em"}},subtitle:{useHTML:!0,text:"",style:{color:"#535353",fontFamily:'"RO Sans", Verdana, sans-serif',fontWeight:"bold",fontSize:"0.9em"}},legend:{enabled:!0,y:60,x:-20,align:"center",verticalAlign:"bottom"},tooltip:{useHTML:!0,headerFormat:"",pointFormat:'<div class="innerTooltip"><b>{point.areaDescr}: {point.fullvalue}</b></div>',style:{color:"#000000",fontFamily:'"RO Sans", Verdana, sans-serif',fontSize:"0.8em",padding:"0"},valueDecimals:0},navigation:{buttonOptions:{enabled:!1}},mapNavigation:{enabled:!0,enableDoubleClickZoomTo:!1,enableDoubleClickZoom:!1,buttonOptions:{theme:{fill:"#f3f3f3","stroke-width":1,stroke:"#ffffff",states:{hover:{fill:"#e6e6e6",stroke:"#ffffff"},select:{fill:"#f3f3f3"}}},verticalAlign:"bottom"},enableMouseWheelZoom:!1},colorAxis:{min:1,max:6e3,minColor:"#e1e1e1",maxColor:"#333333",gridLineWidth:0,labels:{enabled:!0,formatter:function(){return this.isFirst?this.value+1+" "+this.chart.options.axisSuffix:this.value+" "+this.chart.options.axisSuffix},style:{color:"#333333",fontFamily:'"ROSans", Verdana, sans-serif',fontSize:"0.9em"}},tickPositions:[1,3e3]},xAxis:{minPadding:.05,maxPadding:.05},yAxis:{minPadding:.05,maxPadding:.05},plotOptions:{series:{states:{hover:{color:"#e1e1e1"}},joinBy:"hc-key"},map:{nullColor:"#ffffff"}},credits:{enabled:!0,href:"",text:"",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{color:"#535353",fontFamily:'"RO Sans", Verdana, sans-serif',fontWeight:"normal",fontSize:"1.08333em",cursor:"pointer"}},series:[{data:""}],axisSuffix:"",map:""},e=$.extend({},t);return this.each(function(){function t(){p.settings=e,p.dataSets=p.find(".dataSet"),p.toggleOptionsContainer=p.find(".collapsiblePanels");var t=p.data("mappath");$.getJSON(t,function(t){p.map=t,i(),o(),a(p.dataSets[0])})}function i(){$("<div/>",{"class":"mapAreaDark"}).appendTo(p),$("<div/>",{"class":"mapAreaLight"}).appendTo(p),$("<div/>",{"class":"mapAreaHover"}).appendTo(p);var t=$(".mapAreaDark").css("color"),e=$(".mapAreaLight").css("color"),i=$(".mapAreaHover").css("color");p.settings.colorAxis.maxColor=t,p.settings.colorAxis.minColor=e,p.settings.plotOptions.series.states.hover.color=i,$(".mapAreaDark").remove(),$(".mapAreaLight").remove(),$(".mapAreaHover").remove()}function o(){p.mapFigureContainer=$("<div/>",{"class":"thematicmap","aria-hidden":"true"}).prependTo(p);var t=p.find(".mapOptions");$("<div/>",{"class":"descriptionText"}).prependTo(t);var e=p.find(".table").parent(".panel"),i=e.find(".panelContent").attr("id");if($("<button/>",{html:p.data("tableheadertxt"),"aria-controls":i}).prependTo(e),p.find(".dataSet:eq(0)").addClass("current"),p.find(".dataSet .description").hide(),p.dataSets.length>1){var o="panelDataset"+(new Date).getTime().toString(36),a=$("<div/>",{"class":"panel",html:'<button aria-controls="'+o+'">'+p.data("segmentheadertxt")+"</button>"}).prependTo(p.toggleOptionsContainer),r=$("<div/>",{"aria-role":"region","aria-expanded":"true","aria-hidden":"false","class":"panelContent segments",id:o,tabindex:"-1"}).appendTo(a),l=$("<ul/>").appendTo(r);p.dataSets.each(function(){$("<li/>",{html:'<a href="#" class="loadDataSet">'+$(this).find(".title").html()+"</a></h2>"}).appendTo(l)}),l.find("li:eq(0) a").addClass("current")}var h="panelDownload"+(new Date).getTime().toString(36),d=$("<div/>",{"class":"panel",html:'<button aria-controls="'+h+'">'+p.data("downloadheadertxt")+"</button>"}).appendTo(p.toggleOptionsContainer),c=$("<div/>",{"aria-role":"region","aria-expanded":"true","aria-hidden":"false","class":"panelContent downloads",id:h,tabindex:"-1"}).appendTo(d),m=$("<ul/>").appendTo(c);"export"===p.data("export")&&p.dataSets.each(function(){$("<li/>",{html:'<a href="#" class="exportChart png">'+p.data("downloadtxt")+" png</a>"}).appendTo(m)}),m.find("li:eq(0)").addClass("current");var u="metaDownload"+(new Date).getTime().toString(36),g=$("<div/>",{"class":"panel metaPanel",html:'<button aria-controls="'+u+'"></button>'}).appendTo(p.toggleOptionsContainer);$("<div/>",{"aria-role":"region","aria-expanded":"true","aria-hidden":"false","class":"panelContent metadatatoggle",id:u,tabindex:"-1"}).appendTo(g);p.find(".collapsiblePanels").createCollapsePanels(),n(),s()}function n(){if(p.attr("data-opentabs"))for(var t=p.attr("data-opentabs").replace(/\s/g,"").split(","),e=0;e<t.length;e++)p.toggleOptionsContainer.find("."+t[e]).parent(".panel").removeClass("closed").addClass("open")}function a(t){p.settings.plotOptions.series.mapData=p.map;var e=$(t);if(e.find(".title").length>0?p.settings.title.text=r(e.find(".title").html()):p.settings.title.text="",e.find(".subtitle").length>0?p.settings.subtitle.text=r(e.find(".subtitle").html()):p.settings.subtitle.text="",e.find(".source").length>0?p.settings.credits.text=r(e.find(".source").html()):p.settings.credits.text="",e.find(".description").length>0?p.settings.descriptionTxt=r(e.find(".description").html()):p.settings.descriptionTxt="",e.find(".downloadDataset").length>0){var i=p.toggleOptionsContainer.find(".panelContent.downloads ul");i.find(".panelDownloadLink").remove();var o=e.find(".downloadDataset");i.append('<li class="panelDownloadLink"><a href="'+o.attr("href")+'">'+o.html()+"</a></li>")}else p.toggleOptionsContainer.find(".panelDownloadLink").remove();e.find(".metadata").length>0?(p.settings.metadata=e.find(".metadata"),p.settings.metaHeader=r(p.settings.metadata.attr("data-metaheader")),p.settings.metaBody=r(p.settings.metadata.html()),p.toggleOptionsContainer.find(".metaPanel button").html(p.settings.metaHeader),p.toggleOptionsContainer.find(".metadatatoggle").html(p.settings.metaBody),p.toggleOptionsContainer.find(".metaPanel").css({display:"inline-block"})):(p.toggleOptionsContainer.find(".metaPanel button").html(""),p.toggleOptionsContainer.find(".metadatatoggle").html(""),p.toggleOptionsContainer.find(".metaPanel").css({display:"none"}),p.settings.metaHeader="",p.settings.metaBody=""),p.find(".descriptionText").html(p.settings.descriptionTxt);var n=[],a=e.find("table:first"),s=a.find("tbody"),h=0,d=1e5;p.settings.axisSuffix="",p.settings.plotOptions.series.joinBy=p.data("key")||"hc-key",s.find("tr").each(function(){var t=$(this).find("th").data("fieldid"),e=$(this).find("th").html(),i=$(this).find("td").html(),o=i.replace(/[^0-9$.,-]/g,""),a=o.replace(/[,]/g,".");""===a&&(a=null),parseInt(a)>parseInt(h)&&(h=parseInt(a)),parseInt(a)<parseInt(d)&&(d=parseInt(a)),p.settings.colorAxis.min=d,p.settings.colorAxis.max=h,p.settings.colorAxis.tickPositions=[d-1,h];var s={};s[p.settings.plotOptions.series.joinBy]=t,s.areaDescr=e,s.value=a,s.fullvalue=$(this).find("td").html(),n.push(s);var r="",l="",c="",m=i.match("([0-9])","g");m&&(l=i.indexOf(m[0]));var u=i.match("([^0-9., ])","g");u&&(c=i.indexOf(u[0])),l<c&&i.substring(c,i.length)&&(r=i.substring(c,i.length)),""!==r&&(p.settings.axisSuffix=r)});var c=[];c.push({data:n}),p.settings.series=c,l()}function s(){p.find(".loadDataSet").click(function(t){t.preventDefault();var e=$(this).parent("li").index();$(this).parents("ul").find(".current").removeClass("current"),$(this).addClass("current"),p.find(".dataSet.current").removeClass("current"),p.find(".dataSet:eq("+e+")").addClass("current"),p.find(".downloads li.current").removeClass("current"),p.find(".downloads li:eq("+e+")").addClass("current"),a(p.dataSets[e])}),p.find(".exportChart").click(function(t){if(t.preventDefault(),$(this).hasClass("png")){var e=p.mapFigureContainer.highcharts(),i=e.options.title.text.toLowerCase().replace(/ /g,"-");e.exportChart({type:"image/png",filename:i,scale:1.5,sourceWidth:900,url:"//export.highcharts.com/"})}else window.open($(this).attr("href"),"Download")})}function r(t){return t.replace("&amp;","&")}function l(){p.mapFigureContainer.highcharts("Map",p.settings)}var p=$(this);t()})},$(".hmap").makeHmap();