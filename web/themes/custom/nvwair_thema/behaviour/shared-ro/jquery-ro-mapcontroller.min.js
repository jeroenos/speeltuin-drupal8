require([Core.scriptpath+"shared-ro/leaflet"+Core.scriptversion+Core.minify+".js"],function(o){!function(o,t,e){o.Rijksoverheid||(o.Rijksoverheid={}),o.Rijksoverheid.MapController=function(t,e){var a=this;a.$el=o(t),a.el=t,a.$el.data("MapController",a),a.$el.parent(".mapContainer").find(".collapsiblePanels").createCollapsePanels(),a.init=function(){a.options=o.extend({},o.Rijksoverheid.MapController.defaultOptions,e),a.tileProviderUrlTemplate=a.$el.data("layerurl")||a.options.layerurl,a.maxZoom=a.$el.data("maxzoom")||a.options.maxZoom,a.startZoom=a.$el.data("startzoom"),a.minZoom=a.$el.data("minzoom")||a.options.minZoom,a.zoomInText=a.$el.data("zoomin")||"Zoom in",a.zoomOutText=a.$el.data("zoomout")||"Zoom uit",a.attribution=a.$el.data("attribution")||a.options.attribution,a.jsondata=a.$el.data("jsondata")||a.options.jsondata,a.apiKey=a.$el.data("apikey")||a.options.apiKey,a.subDomains=a.$el.data("subdomains")||a.options.subDomains,a.dataMarkers=a.$el.data("markers")||a.options.dataMarkers,a.altText=a.$el.data("alttext")||a.options.altText,a.iconPath=a.$el.data("iconpath"),a.markerdata=a._setData(a.dataMarkers),this.map=this._createMap(),this._setMarkers(a.markerdata.markers,this.map),this.map.whenReady(this._onWhenReady),this.map.on("click",this._onMapClick),this.map.on("focus",this._onMapFocus,this),this.map.on("blur",this._onMapBlur,this)},a._onWhenReady=function(){a.options.listenToEvents&&(this.on("popupopen",a._handlePopupOpen),this.on("popupclose",a._handlePopupClose)),e.addAltText&&a._setAltText()},a._onMapFocus=function(){a.$el.addClass("focus")},a._onMapBlur=function(){a.$el.removeClass("focus")},a._createMap=function(){var o=L.map(a.el.id,{zoom:a.startZoom,dragging:a.options.dragging,zoomControl:!1,scrollWheelZoom:a.options.scrollWheelZoom,doubleClickZoom:a.options.doubleClickZoom,boxZoom:a.options.boxZoom,touchZoom:a.options.touchZoom,keyboard:a.options.keyboardInteraction,trackResize:a.options.trackResize});return L.tileLayer(a.tileProviderUrlTemplate,{attribution:a.attribution,maxZoom:a.maxZoom,minZoom:a.minZoom,subdomains:a.subDomains,key:a.apiKey,detectRetina:!0}).addTo(o),L.control.zoom({zoomInText:a.zoomInText,zoomInTitle:a.zoomInText,zoomOutText:a.zoomOutText,zoomOutTitle:a.zoomOutText}).addTo(o),L.control.scale({imperial:!1,position:"topright"}).addTo(o),L.Icon.Default.imagePath=a.iconPath,o},a._setMarkers=function(t,e){a.markers=[],a.bounds=[];var i={minWidth:Math.min(e._container.offsetWidth,200),maxWidth:Math.min(e._container.offsetWidth-53,300)};o.each(t,function(o,t){var n=t.title.replace(/(<([^>]+)>)/gi,"").replace(/^\s+|\s+$/g,""),s=L.marker(t.latlng,{title:n}).addTo(e);a.markers.push(s),a.bounds.push(t.latlng),a.markers[o].bindPopup(t.popuptext,i)});var n=new L.latLngBounds(a.bounds);this.map.fitBounds(n,{padding:new L.point(16,16)}),parseInt(a.startZoom,10)>-1?this.map.setZoom(a.startZoom):1===t.length&&this.map.setZoom(t[0].zoom||a.options.startZoom)},a._setData=function(t){if(!t){t={};var e=null;if(t.markers=[],e=a.$el.parent(".mapContainer").find(".mapData"),0===e.length)return;var i=function(o,e,i){var n=o.data("location").split(","),s=o.data("zoom")||a.startZoom,r={latlng:n,title:e,popuptext:i,zoom:s};t.markers.push(r)};e.each(function(){var t=o(this),e=t.find("h3").html()||t.find("a").html()||t.html(),a=t.html();i(t,e,a)})}return t},a._handlePopupOpen=function(t){this.dragging.disable(),this.touchZoom.disable(),this.scrollWheelZoom.disable(),this.doubleClickZoom.disable(),this.boxZoom.disable(),this.keyboard.disable(),o(t.popup._container).find(".leaflet-popup-content a").first().focus()},a._handlePopupClose=function(){this.options.dragging&&this.dragging.enable(),this.options.touchZoom&&this.touchZoom.enable(),this.options.scrollWheelZoom&&this.scrollWheelZoom.enable(),this.options.doubleClickZoom&&this.doubleClickZoom.enable(),this.options.boxZoom&&this.boxZoom.enable(),this.options.keyboardInteraction&&this.keyboard.enable()},a._setAltText=function(){a.$el.find("img:not([alt])").attr("alt","").first().attr("alt",this.altText)},a.init()},o.Rijksoverheid.MapController.defaultOptions={maxZoom:18,minZoom:1,subDomains:[],apiKey:"",listenToEvents:!1,tileProviderUrlTemplate:"https://d3tzenn0mbkxsx.cloudfront.net/osm/{z}/{x}/{y}.png",attribution:'Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="http://www.and.com">AND</a>',startZoom:12,dragging:!0,zoomControl:!0,scrollWheelZoom:!0,doubleClickZoom:!0,boxZoom:!1,touchZoom:!0,keyboardInteraction:!0,trackResize:!0,dataMarkers:null,altText:"",addAltText:!1},o.fn.Rijksoverheid_MapController=function(t){return this.each(function(){new o.Rijksoverheid.MapController(this,t)})}}(jQuery,Core),$(".map").Rijksoverheid_MapController({maxZoom:11,minZoom:2,listenToEvents:!0,dataProvider:"child",addAltText:!0})});